
# PostgreSQL Queries & Concepts

### 1я╕ПтГг **PostgreSQL ржХрж┐ ?**  
**ржЙрждрзНрждрж░:** PostgreSQL ржПржХржЯрж┐ ржУржкрзЗржи-рж╕рзЛрж░рзНрж╕ рж░рж┐рж▓рзЗрж╢ржирж╛рж▓ ржбрж╛ржЯрж╛ржмрзЗрж╕ ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯ рж╕рж┐рж╕рзНржЯрзЗржо (RDBMS) ржпрж╛ ржбрзЗржЯрж╛ рж╕ржВрж░ржХрзНрж╖ржг, ржорзНржпрж╛ржирж┐ржкрзБрж▓рзЗрж╢ржи ржПржмржВ ржкрзБржирж░рзБржжрзНржзрж╛рж░ ржХрж░рж╛рж░ ржЬржирзНржп ржмрзНржпржмрж╣рзГржд рж╣ржпрж╝ред ржПржЯрж┐ SQL ржПржмржВ ржЕржирзНржпрж╛ржирзНржп ржЖржзрзБржирж┐ржХ ржмрзИрж╢рж┐рж╖рзНржЯрзНржп ржпрзЗржоржи JSON, XML, ржЯрзНрж░рж┐ржЧрж╛рж░, рж╕рзНржЯрзЛрж░ржб ржкрзНрж░рж╕рж┐ржбрж┐ржЙрж░ ржПржмржВ ACID ржХржоржкрзНрж▓рж╛рзЯрзЗржирзНрж╕ рж╕рж╛ржкрзЛрж░рзНржЯ ржХрж░рзЗред

---

### 2я╕ПтГг **PostgreSQL-ржП ржПржХржЯрж┐ ржбрж╛ржЯрж╛ржмрзЗрж╕ рж╕рзНржХрж┐ржорж╛рж░ ржЙржжрзНржжрзЗрж╢рзНржп ржХрзА ?**  
**ржЙрждрзНрждрж░:** ржПржХржЯрж┐ рж╕рзНржХрж┐ржорж╛ рж╣рж▓рзЛ ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗрж░ ржоржзрзНржпрзЗ ржЕржмржЬрзЗржХрзНржЯржЧрзБрж▓рзЛрж░ ржПржХржЯрж┐ рж╕ржВржЧржарж┐ржд ржХрж╛ржарж╛ржорзЛ (ржпрзЗржоржи ржЯрзЗржмрж┐рж▓, ржнрж┐ржЙ, ржлрж╛ржВрж╢ржи)ред ржПржЯрж┐ ржирж╛ржорзЗрж░ рж╕ржВржШрж░рзНрж╖ ржПржбрж╝рж╛рждрзЗ ржПржмржВ ржЕржмржЬрзЗржХрзНржЯржЧрзБрж▓рзЛржХрзЗ ржЧрзНрж░рзБржк ржХрж░рж╛рж░ ржЬржирзНржп ржмрзНржпржмрж╣рзГржд рж╣ржпрж╝ред ржПрждрзЗ ржПржХржЯрж┐ ржбрж╛ржЯрж╛ржмрзЗрж╕ржХрзЗ ржЖрж░ржУ ржмрзЗрж╢рж┐ ржмрзНржпржмрж╕рзНржерж╛ржкржирж╛ржпрзЛржЧрзНржп ржУ рж╕рзБрж░ржХрзНрж╖рж┐ржд ржХрж░рж╛ ржпрж╛ржпрж╝ред

---

### 3я╕ПтГг **PostgreSQL-ржП ржкрзНрж░рж╛ржЗржорж╛рж░рж┐ ржХрзА ржПржмржВ ржлрж░рзЗржи ржХрзА ржзрж╛рж░ржгрж╛ржЧрзБрж▓рж┐ ржмрзНржпрж╛ржЦрзНржпрж╛ ржХрж░рзЛ ?**  
**ржЙрждрзНрждрж░:**  
- **Primary Key** рж╣рж▓рзЛ ржПржоржи ржПржХржЯрж┐ ржХрж▓рж╛ржо ржмрж╛ ржХрж▓рж╛ржо рж╕рзЗржЯ ржпрж╛ ржкрзНрж░рждрж┐ржЯрж┐ рж░рзЗржХрж░рзНржбржХрзЗ ржЗржЙржирж┐ржХржнрж╛ржмрзЗ рж╢ржирж╛ржХрзНржд ржХрж░рзЗред ржПржЯрж┐ `NULL` рж╣рждрзЗ ржкрж╛рж░рзЗ ржирж╛ред  
- **Foreign Key** рж╣рж▓рзЛ ржПржоржи ржПржХржЯрж┐ ржХрж▓рж╛ржо ржпрж╛ ржЕржирзНржп ржЯрзЗржмрж┐рж▓рзЗрж░ ржкрзНрж░рж╛ржЗржорж╛рж░рж┐ ржХрзАржХрзЗ рж░рзЗржлрж╛рж░ ржХрж░рзЗ, ржпрж╛ ржЯрзЗржмрж┐рж▓ржЧрзБрж▓рзЛрж░ ржоржзрзНржпрзЗ рж╕ржорзНржкрж░рзНржХ рждрзИрж░рж┐ ржХрж░рзЗред

---

### 4я╕ПтГг **VARCHAR ржПржмржВ CHAR ржбрзЗржЯрж╛ ржЯрж╛ржЗржкрзЗрж░ ржоржзрзНржпрзЗ ржкрж╛рж░рзНржержХрзНржп ржХрзА ?**  
**ржЙрждрзНрждрж░:**  
- `VARCHAR(n)` ржкрж░рж┐ржмрж░рзНрждржирж╢рзАрж▓ ржжрзИрж░рзНржШрзНржпрзЗрж░ рж╕рзНржЯрзНрж░рж┐ржВ рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рзЗ ржПржмржВ рж╕рж░рзНржмрзЛржЪрзНржЪ `n` ржЕржХрзНрж╖рж░ ржЧрзНрж░рж╣ржг ржХрж░рждрзЗ ржкрж╛рж░рзЗред  
- `CHAR(n)` ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржжрзИрж░рзНржШрзНржпрзЗрж░ рж╕рзНржЯрзНрж░рж┐ржВ рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рзЗ ржПржмржВ ржпржжрж┐ рж╕рзНржЯрзНрж░рж┐ржВ ржЫрзЛржЯ рж╣ржпрж╝, рждрж╛рж╣рж▓рзЗ ржЕрждрж┐рж░рж┐ржХрзНржд ржЬрж╛рзЯржЧрж╛ ржлрж╛ржБржХрж╛ ржжрж┐рзЯрзЗ ржкрзВрж░ржг ржХрж░рзЗред

---

### 5я╕ПтГг **WHERE ржПржХржЯрж┐ ржмрж┐ржмрзГрждрж┐рждрзЗ ржзрж╛рж░рж╛ржЯрж┐рж░ ржЙржжрзНржжрзЗрж╢рзНржп ржмрзНржпрж╛ржЦрзНржпрж╛ ржХрж░рзЛ SELECT ?**  
**ржЙрждрзНрждрж░:** `WHERE` ржХрзНрж▓ржЬржЯрж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж╢рж░рзНржд ржкрзВрж░ржг ржХрж░рзЗ ржПржоржи рж░рзЗржХрж░рзНржбржЧрзБрж▓рзЛ `SELECT` рж╕рзНржЯрзЗржЯржорзЗржирзНржЯрзЗрж░ ржорж╛ржзрзНржпржорзЗ ржлрж┐рж▓рзНржЯрж╛рж░ ржХрж░рж╛ ржпрж╛ржпрж╝ред ржПржЯрж┐ ржбрзЗржЯрж╛ ржХрзБржпрж╝рзЗрж░рж┐рж░ рж╕ржоржпрж╝ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж░рзЛ ржмрзЗржЫрзЗ ржирж┐рждрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рзЗред

---

### 6я╕ПтГг **LIMIT ржПржмржВ OFFSET ржзрж╛рж░рж╛ржЧрзБрж▓рж┐ ржХрзАрж╕рзЗрж░ ржЬржирзНржп ржмрзНржпржмрж╣рзГржд рж╣ржпрж╝ ?**  
**ржЙрждрзНрждрж░:**  
- `LIMIT` ржирж┐рж░рзНржзрж╛рж░ржг ржХрж░рзЗ ржХрждржЯрж┐ рж░рзЗржХрж░рзНржб ржХрзБржпрж╝рзЗрж░рж┐ ржерзЗржХрзЗ ржлрзЗрж░ржд ржЖрж╕ржмрзЗред  
- `OFFSET` ржирж┐рж░рзНржзрж╛рж░ржг ржХрж░рзЗ ржХрждржЧрзБрж▓рж┐ рж░рзЗржХрж░рзНржб рж╕рзНржХрж┐ржк ржХрж░рзЗ рж╢рзБрж░рзБ ржХрж░рж╛ рж╣ржмрзЗред  
ржПржЧрзБрж▓рзЛ pagination ржмрж╛ ржкрзЗржЬржнрж┐рждрзНрждрж┐ржХ ржбрзЗржЯрж╛ ржкрзНрж░ржжрж░рзНрж╢ржирзЗрж░ ржЬржирзНржп ржмрзНржпржмрж╣рзГржд рж╣рзЯред

---

### 7я╕ПтГг **UPDATE рж╕рзНржЯрзЗржЯржорзЗржирзНржЯ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЖржкржирж┐ ржХрзАржнрж╛ржмрзЗ ржбрзЗржЯрж╛ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рждрзЗ ржкрж╛рж░рзЗржи ?**  
**ржЙрждрзНрждрж░:** `UPDATE` рж╕рзНржЯрзЗржЯржорзЗржирзНржЯ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржПржХржЯрж┐ ржЯрзЗржмрж┐рж▓рзЗрж░ ржмрж┐ржжрзНржпржорж╛ржи рж░рзЗржХрж░рзНржбрзЗрж░ ржорж╛ржи ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рж╛ ржпрж╛ржпрж╝ред ржЙржжрж╛рж╣рж░ржг:  
```sql
UPDATE books SET price = 50 WHERE id = 1;
```

---

### 8я╕ПтГг **JOIN ржЕржкрж╛рж░рзЗрж╢ржирзЗрж░ рждрж╛рзОржкрж░рзНржп ржПржмржВ PostgreSQL-ржП ржПржЯрж┐ ржХрзАржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ ?**  
**ржЙрждрзНрждрж░:** `JOIN` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржПржХрж╛ржзрж┐ржХ ржЯрзЗржмрж┐рж▓ ржерзЗржХрзЗ рж╕ржорзНржкрж░рзНржХржпрзБржХрзНржд рждржерзНржп рж╕ржВржЧрзНрж░рж╣ ржХрж░рж╛ ржпрж╛ржпрж╝ред PostgreSQL-ржП ржмрж┐ржнрж┐ржирзНржи JOIN ржЖржЫрзЗ ржпрзЗржоржи `INNER JOIN`, `LEFT JOIN`, `RIGHT JOIN` ржЗрждрзНржпрж╛ржжрж┐ред ржПржЯрж┐ рж╕рж╛ржзрж╛рж░ржгржд ржлрж░рзЗржи ржХрзА рж╕ржорзНржкрж░рзНржХржпрзБржХрзНржд ржЯрзЗржмрж┐рж▓рзЗрж░ рждржерзНржп ржПржХрж╕рж╛ржерзЗ ржЖржирждрзЗ ржмрзНржпржмрж╣рзГржд рж╣рзЯред

---

### 9я╕ПтГг **GROUP BY ржзрж╛рж░рж╛ржЯрж┐ ржПржмржВ рж╕ржорж╖рзНржЯрж┐ ржХрж╛рж░рзНржпржХрзНрж░ржорзЗ ржПрж░ ржнрзВржорж┐ржХрж╛ ржмрзНржпрж╛ржЦрзНржпрж╛ ржХрж░рзЛ ?**  
**ржЙрждрзНрждрж░:** `GROUP BY` ржХрзНрж▓ржЬржЯрж┐ ржПржХржЗ ржзрж░ржирзЗрж░ ржорж╛ржиржпрзБржХрзНржд рж░рзЗржХрж░рзНржбржЧрзБрж▓рзЛржХрзЗ ржЧрзНрж░рзБржк ржХрж░рзЗ ржПржмржВ рждрж╛ржжрзЗрж░ ржУржкрж░ рж╕ржорж╖рзНржЯрж┐ржЧржд ржлрж╛ржВрж╢ржи (ржпрзЗржоржи COUNT, SUM, AVG) ржкрзНрж░рзЯрзЛржЧ ржХрж░рждрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рзЗред ржПржЯрж┐ рж░рж┐ржкрзЛрж░рзНржЯ рждрзИрж░рж┐ ржмрж╛ ржмрж┐рж╢рзНрж▓рзЗрж╖ржгрзЗрж░ ржХрж╛ржЬрзЗ ржмрзНржпржмрж╣рзГржд рж╣ржпрж╝ред

---

### ЁЯФЯ **PostgreSQL-ржП COUNT(), SUM(), ржПржмржВ AVG() ржПрж░ ржорждрзЛ рж╕ржорж╖рзНржЯрж┐ржЧржд ржлрж╛ржВрж╢ржиржЧрзБрж▓рж┐ ржХрзАржнрж╛ржмрзЗ ржЧржгржирж╛ ржХрж░ржмрзЗржи ?**  
**ржЙрждрзНрждрж░:**  
- `COUNT()` тАФ ржорзЛржЯ рж░рзЗржХрж░рзНржб рж╕ржВржЦрзНржпрж╛ ржЧржгржирж╛ ржХрж░рзЗред  
- `SUM()` тАФ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржХрж▓рж╛ржорзЗрж░ ржорж╛ржиржЧрзБрж▓рзЛрж░ ржпрзЛржЧржлрж▓ ржмрзЗрж░ ржХрж░рзЗред  
- `AVG()` тАФ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржХрж▓рж╛ржорзЗрж░ ржЧрзЬ ржорж╛ржи ржмрзЗрж░ ржХрж░рзЗред
  
ржЙржжрж╛рж╣рж░ржг:

```sql
SELECT COUNT(*) FROM orders;
SELECT SUM(price) FROM books;
SELECT AVG(price) FROM books;
```

---

### 1я╕ПтГг1я╕ПтГг **PostgreSQL-ржП ORDER BY ржПрж░ ржХрж╛ржЬ ржХрзА ?**

**ржЙрждрзНрждрж░:**
`ORDER BY` ржХрзНрж▓ржЬ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржХрзБрзЯрзЗрж░рж┐рж░ ржлрж▓рж╛ржлрж▓ржХрзЗ ржПржХржЯрж┐ ржмрж╛ ржПржХрж╛ржзрж┐ржХ ржХрж▓рж╛ржорзЗрж░ ржорж╛ржи ржЕржирзБрж╕рж╛рж░рзЗ рж╕рж╛ржЬрж╛ржирзЛ ржпрж╛ржпрж╝ред ржПржЯрж┐ ржбрж┐ржлрж▓рзНржЯржнрж╛ржмрзЗ `ASC` (ascending) ржЕрж░рзНржбрж╛рж░рзЗ ржерж╛ржХрзЗ, рждржмрзЗ ржЪрж╛ржЗрж▓рзЗ `DESC` (descending) ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрж╛рзЯред

```sql
SELECT * FROM books ORDER BY price DESC;
```

---

### 1я╕ПтГг2я╕ПтГг **DISTINCT ржХрзА ржПржмржВ ржПрж░ ржмрзНржпржмрж╣рж╛рж░ ржХрзАржнрж╛ржмрзЗ ржХрж░рж╛ рж╣рзЯ ?**

**ржЙрждрзНрждрж░:**
`DISTINCT` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯ ржПржХржЯрж┐ ржХрж▓рж╛ржорзЗрж░ ржбрзБржкрзНрж▓рж┐ржХрзЗржЯ ржорж╛ржи рж╕рж░рж┐рзЯрзЗ ржЗржЙржирж┐ржХ рж░рзЗржХрж░рзНржб ржЖржирж╛рж░ ржЬржирзНржпред

```sql
SELECT DISTINCT category FROM books;
```

---

### 1я╕ПтГг3я╕ПтГг **PostgreSQL-ржП INDEX ржХрзА ржПржмржВ ржХрзЗржи ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯ ?**

**ржЙрждрзНрждрж░:**
**Index** рж╣рж▓рзЛ ржПржХржЯрж┐ ржбрзЗржЯрж╛ рж╕рзНржЯрзНрж░рж╛ржХржЪрж╛рж░ ржпрж╛ ржЯрзЗржмрж┐рж▓рзЗрж░ рж╕рж╛рж░рзНржЪ ржмрж╛ ржХрзБрзЯрзЗрж░рж┐ рж╕рзНржкрж┐ржб ржмрж╛рзЬрж╛ржирзЛрж░ ржЬржирзНржп ржмрзНржпржмрж╣рзГржд рж╣рзЯред ржпржЦржи ржЯрзЗржмрж┐рж▓рзЗ ржЕржирзЗржХ рж░рзЗржХрж░рзНржб ржерж╛ржХрзЗ, рждржЦржи ржЗржиржбрзЗржХрзНрж╕ ржЫрж╛рзЬрж╛ рж╕рж╛рж░рзНржЪ ржЕржирзЗржХ рж╕рзНрж▓рзЛ рж╣рзЯред

```sql
CREATE INDEX idx_books_title ON books(title);
```

---

### 1я╕ПтГг4я╕ПтГг **PostgreSQL-ржП DELETE ржПржмржВ TRUNCATE ржПрж░ ржоржзрзНржпрзЗ ржкрж╛рж░рзНржержХрзНржп ржХрзА ?**

**ржЙрждрзНрждрж░:**

* `DELETE` тАФ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржХржирзНржбрж┐рж╢ржирзЗрж░ ржЙржкрж░ ржнрж┐рждрзНрждрж┐ ржХрж░рзЗ рж░рзЗржХрж░рзНржб ржбрж┐рж▓рж┐ржЯ ржХрж░рзЗ, ржПржмржВ ржПржЯрж┐ рж░рзЛрж▓ржмрзНржпрж╛ржХ ржХрж░рж╛ ржпрж╛рзЯред
* `TRUNCATE` тАФ ржкрзБрж░рзЛ ржЯрзЗржмрж┐рж▓рзЗрж░ рж╕ржм рж░рзЗржХрж░рзНржб ржПржХрж╕рж╛ржерзЗ ржбрж┐рж▓рж┐ржЯ ржХрж░рзЗ, ржХрж┐ржирзНрждрзБ ржПржЯрж┐ ржжрзНрж░рзБрждрждрж░ ржПржмржВ рж╕рж╛ржзрж╛рж░ржгржд рж░рзЛрж▓ржмрзНржпрж╛ржХ ржХрж░рж╛ ржпрж╛рзЯ ржирж╛ред

```sql
DELETE FROM books WHERE id = 5;
TRUNCATE TABLE books;
```

---

### 1я╕ПтГг5я╕ПтГг **PostgreSQL-ржП ржЯрзЗржмрж┐рж▓рзЗрж░ рж╕рж╛ржерзЗ ржЯрзЗржмрж┐рж▓ рж╕ржорзНржкрж░рзНржХ (Relationships) ржХрж┐ржнрж╛ржмрзЗ рждрзИрж░рж┐ ржХрж░рж╛ рж╣рзЯ ?**

**ржЙрждрзНрждрж░:**
PostgreSQL-ржП ржЯрзЗржмрж┐рж▓ рж░рж┐рж▓рзЗрж╢ржирж╢рж┐ржк рждрзИрж░рж┐ ржХрж░рж╛ рж╣рзЯ **Primary Key** ржПржмржВ **Foreign Key** ржПрж░ ржорж╛ржзрзНржпржорзЗред ржпрзЗржоржиржГ

```sql
CREATE TABLE authors (
  id SERIAL PRIMARY KEY,
  name VARCHAR(100)
);

CREATE TABLE books (
  id SERIAL PRIMARY KEY,
  title VARCHAR(200),
  author_id INT REFERENCES authors(id)
);
```

ржПржЦрж╛ржирзЗ `books` ржЯрзЗржмрж┐рж▓рзЗрж░ `author_id` рж╣рж▓рзЛ `authors` ржЯрзЗржмрж┐рж▓рзЗрж░ `id` ржПрж░ рж╕рж╛ржерзЗ рж╕ржорзНржкрж░рзНржХржпрзБржХрзНрждред

---
